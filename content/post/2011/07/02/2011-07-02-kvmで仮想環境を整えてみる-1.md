---
title: KVMで仮想環境を整えてみる – (1)
author: kazu634
date: 2011-07-02
url: /2011/07/02/_1714/
wordtwit_post_info:
  - 'O:8:"stdClass":13:{s:6:"manual";b:0;s:11:"tweet_times";i:1;s:5:"delay";i:0;s:7:"enabled";i:1;s:10:"separation";s:2:"60";s:7:"version";s:3:"3.7";s:14:"tweet_template";b:0;s:6:"status";i:2;s:6:"result";a:0:{}s:13:"tweet_counter";i:2;s:13:"tweet_log_ids";a:1:{i:0;i:5435;}s:9:"hash_tags";a:0:{}s:8:"accounts";a:1:{i:0;s:7:"kazu634";}}'
categories:
  - kvm
  - linux

---
<div class="section">
<p>
    最近の PC を見てると、とても安価にクアッドコア・8GBメモリーなんていう構成が手に入ることに気づいたので、 Linux に標準でついている KVM で仮想環境を整えてみることにしました。まだまだ始めたばかりですけど、検証用の環境がかなりお手軽に作れることに気づきました。というわけで自分用のメモです。
</p>
  
<h4>
    環境
</h4>
  
<p>
    Ubuntu 11.04で検証しているよ。VNCクライアントはすでに導入済みという想定です。
</p>
  
<h4>
    必要なパッケージ
</h4>
  
<p>
    とりあえずこれらのパッケージをインストールしたみたい。
</p>
  
<pre class="syntax-highlight">
$ sudo aptitude <span class="synStatement">install</span> kvm kvm-pxe qemu-kvm  bridge-utils libvirt libvirt-dev libvirt-bin virtinst
</pre>
  
<h4>
    ゲストOSの作成
</h4>
  
<p>
    こういうようにして作成します:
</p>
  
<pre class="syntax-highlight">
$ sudo virt-<span class="synStatement">install</span> <span class="synSpecial">--name</span> <span class="synStatement">&#60;</span>ゲストOSの名前<span class="synStatement">&#62;</span> <span class="synSpecial">--ram</span> <span class="synConstant">256</span> <span class="synSpecial">--disk</span> <span class="synIdentifier">path</span>=<span class="synStatement">&#60;</span>イメージファイルの名前<span class="synStatement">&#62;</span>,<span class="synIdentifier">size</span>=<span class="synConstant">10</span> <span class="synSpecial">--network</span> <span class="synIdentifier">network</span>=<span class="synIdentifier">default,model</span>=virtio <span class="synSpecial">--network</span> <span class="synIdentifier">network</span>=<span class="synIdentifier">default,model</span>=virtio <span class="synSpecial">--vnc</span> <span class="synSpecial">--cdrom</span> <span class="synStatement">&#60;</span>OSインストール用のisoイメージファイル<span class="synStatement">&#62;</span>
</pre>
  
<p>
    イメージファイルはカレントディレクトリに作成されるようです。&#8211;cdromオプションで、起動時に読み込むcdromイメージを指定します。isoイメージを指定できます。VNC経由でディスプレイに表示される画面を閲覧できます。
</p>
  
<p>
<a href="http://f.hatena.ne.jp/sirocco634/20110702225720" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://f.hatena.ne.jp/sirocco634/20110702225720', '');" class="hatena-fotolife" target="_blank"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/s/sirocco634/20110702/20110702225720.png" alt="f:id:sirocco634:20110702225720p:image" title="f:id:sirocco634:20110702225720p:image" class="hatena-fotolife" /></a>
</p>
  
<p>
    後は VNC 経由でインストールしてあげます。
</p>
</div>