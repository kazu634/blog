---
title: さくらインターネットに WiLiKi をインストール
author: kazu634
date: 2010-04-13
wordtwit_post_info:
  - 'O:8:"stdClass":13:{s:6:"manual";b:0;s:11:"tweet_times";i:1;s:5:"delay";i:0;s:7:"enabled";i:1;s:10:"separation";s:2:"60";s:7:"version";s:3:"3.7";s:14:"tweet_template";b:0;s:6:"status";i:2;s:6:"result";a:0:{}s:13:"tweet_counter";i:2;s:13:"tweet_log_ids";a:1:{i:0;i:5221;}s:9:"hash_tags";a:0:{}s:8:"accounts";a:1:{i:0;s:7:"kazu634";}}'
categories:
  - gauche

---
<div class="section">
<p>
    さくらインターネットに WiLiKi をインストールしました。 WiLiKi で標準で使用する gdbm をさくらインターネットには導入できなかったため、 WiLiKi を動作させるのにはまりました。何かの参考までにインストール方法を載せておきます。
</p>
  
<p>
    ちなみに WiLiKi は<a href="http://simoom634.sakura.ne.jp/wiliki/wiliki.cgi" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://simoom634.sakura.ne.jp/wiliki/wiliki.cgi', 'ここ');" target="_blank">ここ</a>です。
</p>
  
<h4>
    Gaucheのインストール
</h4>
  
<p>
<a href="http://practical-scheme.net/gauche/download-j.html" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://practical-scheme.net/gauche/download-j.html', 'Gauche');" target="_blank">Gauche</a> から Gauche のソースをダウンロードします。
</p>
  
<pre class="syntax-highlight">
% wget http://prdownloads.sourceforge.net/gauche/Gauche<span class="synConstant">-0</span>.<span class="synConstant">9</span>.tgz
% tar zxvf Gauche<span class="synConstant">-0</span>.<span class="synConstant">9</span>.tgz
</pre>
  
<p>
    ここでは、 Gauche を ~/local にビルドすることにします:
</p>
  
<pre class="syntax-highlight">
% ./configure <span class="synSpecial">--prefix=</span><span class="synPreProc">$HOME</span>/<span class="synStatement">local</span>
% make
% make <span class="synStatement">test</span>
% make <span class="synStatement">install</span>
</pre>
  
<h4>
    WiLiKiのインストール
</h4>
  
<p>
<a href="http://sourceforge.net/projects/wiliki/files/wiliki/0.6.1/WiLiKi-0.6.1.tgz/download" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://sourceforge.net/projects/wiliki/files/wiliki/0.6.1/WiLiKi-0.6.1.tgz/download', 'WiLiKi');" target="_blank">WiLiKi</a> から WiLiKi のソースをダウンロードします。
</p>
  
<pre class="syntax-highlight">
% wget http://sourceforge.net/projects/wiliki/files/wiliki/<span class="synConstant"></span>.<span class="synConstant">6</span>.<span class="synConstant">1</span>/WiLiKi<span class="synConstant">-0</span>.<span class="synConstant">6</span>.<span class="synConstant">1</span>.tgz/download
</pre>
  
<p>
    「<a href="http://practical-scheme.net/wiliki/wiliki.cgi?WiLiKi%3a%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%3a%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://practical-scheme.net/wiliki/wiliki.cgi?WiLiKi%3a%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%3a%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB', 'リファレンス');" target="_blank">リファレンス</a>」で紹介されている gauche-package を使う方法を用いると、 GDBM のテストでエラーが発生し、インストールに失敗します。そこで、 tgz を解凍し、 configure → make → make install します:
</p>
  
<pre class="syntax-highlight">
% tar zxvf WiLiKi<span class="synConstant">-0</span>.<span class="synConstant">6</span>.<span class="synConstant">1</span>.tgz
% <span class="synStatement">cd</span> WiLiKi<span class="synConstant">-0</span>.<span class="synConstant">6</span>.<span class="synConstant">1</span>
% ./configure <span class="synSpecial">--prefix=</span><span class="synPreProc">$HOME</span>/<span class="synStatement">local</span>
% make
% make <span class="synStatement">install</span>
</pre>
  
<h4>
    wiliki.cgi・wiliki.cssの設置
</h4>
  
<p>
    src フォルダにある wiliki.cgi を ~/www/ 以下の任意の場所にコピーします。ここでは ~/www/wiliki に設置します。
</p>
  
<pre class="syntax-highlight">
% <span class="synStatement">cd</span> src
% cp <span class="synSpecial">-p</span> wiliki.cgi ~/www/wiliki/
</pre>
  
<p>
    また、 wiliki.css を ~/www/ 以下の任意の場所にコピーします。ここでは ~/www/ に設置します。
</p>
  
<pre class="syntax-highlight">
% cp <span class="synSpecial">-p</span> wiliki.css ~/www
</pre>
  
<h4>
    wiliki.cgi の編集
</h4>
  
<p>
    「<a href="http://practical-scheme.net/wiliki/wiliki.cgi?WiLiKi%3a%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%3a%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB#H-cawcyt" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://practical-scheme.net/wiliki/wiliki.cgi?WiLiKi%3a%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB%3a%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB#H-cawcyt', 'カスタマイズ');" target="_blank">カスタマイズ</a>」を参考に、設定を編集します。
</p>
  
<p>
    なお、デフォルトの gdbm はさくらインターネットでは使用できません。ソースからのビルドも管理者権限が必要となるため失敗しました。そこで fsdbm を用います。私の場合は下記のように設定しました:
</p>
  
<pre class="syntax-highlight">
simoom634@www1594% diff ~/<span class="synStatement">source</span>/WiLiKi<span class="synConstant">-0</span>.<span class="synConstant">6</span>.<span class="synConstant">1</span>/src/wiliki.cgi wiliki.cgi           ~/www/wiliki <span class="synStatement">[</span><span class="synConstant">3743</span><span class="synStatement">]</span>
1c1
<span class="synStatement">&#60;</span><span class="synComment"> #!/usr/bin/gosh</span>
---
<span class="synStatement">&#62;</span><span class="synComment"> #!/home/simoom634/local/bin/gosh</span>
3a4
<span class="synStatement">&#62;</span> <span class="synStatement">(</span>use dbm.fsdbm<span class="synStatement">)</span>
55c56,<span class="synConstant">57</span>
<span class="synStatement">&#60;</span>      :db-path <span class="synStatement">&#34;</span><span class="synConstant">/home/shiro/data/wikidata.dbm</span><span class="synStatement">&#34;</span>
---
<span class="synStatement">&#62;</span>      :db-path <span class="synStatement">&#34;</span><span class="synConstant">/home/simoom634/data/wikidata.dbm</span><span class="synStatement">&#34;</span>
<span class="synStatement">&#62;</span>      :db-<span class="synStatement">type</span> <span class="synStatement">&#60;</span>fsdbm<span class="synStatement">&#62;</span>
<span class="synConstant">58</span>,59c60,<span class="synConstant">61</span>
<span class="synStatement">&#60;</span>      :description <span class="synStatement">&#34;</span><span class="synConstant">Shiro's Wiliki Site</span><span class="synStatement">&#34;</span>
<span class="synStatement">&#60;</span>      :style-sheet <span class="synStatement">&#34;</span><span class="synConstant">wiliki.css</span><span class="synStatement">&#34;</span>
---
<span class="synStatement">&#62;</span>      :description <span class="synStatement">&#34;</span><span class="synConstant">Kazu634's Wiliki Site</span><span class="synStatement">&#34;</span>
<span class="synStatement">&#62;</span>      :style-sheet <span class="synStatement">&#34;</span><span class="synConstant">../wiliki.css</span><span class="synStatement">&#34;</span>
61c63
<span class="synStatement">&#60;</span>      :charsets <span class="synStatement">'</span><span class="synConstant">((jp . euc-jp) (en . euc-jp))</span>
<span class="synConstant">---</span>
<span class="synConstant">&#62;      :charsets </span><span class="synStatement">'</span><span class="synSpecial">((</span>jp . utf<span class="synConstant">-8</span>) (en . utf<span class="synConstant">-8</span><span class="synSpecial">))</span>
63c65
<span class="synStatement">&#60;</span>      :debug-level <span class="synConstant"></span>
---
<span class="synStatement">&#62;</span>      :debug-level <span class="synConstant">1</span>
</pre>
  
<p>
    事前に /home/simoom634/data/ ディレクトリーを作成してください。
</p>
</div>
